@model IEnumerable<AirlineServices.Models.Ticket>

@{
    ViewBag.Title = "Tickets";
}

<h2>Ticket List</h2>

<p>
    @Html.ActionLink("Book Ticket", "Create")
</p>
<table class="table">
    <tr>
        <th>
            Flight
        </th>
        <th>
            @Html.DisplayNameFor(model => model.flight.departureDate)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.passenger.FullName)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.status)
        </th>
        <th>
            @Html.DisplayNameFor(model => model.type)
        </th>
        <th></th>
    </tr>

@foreach (var item in Model)
{
    <tr>
        <td>
            @Html.ActionLink((@Html.DisplayFor(modelItem => item.flight.source.city).ToString() + " - " + @Html.DisplayFor(modelItem => item.flight.destination.city).ToString()).ToString(), "Details", "Flights", new { item.flight.id }, new { @class = "" })
        </td>
        <td>
            @Html.ActionLink(@Html.DisplayFor(modelItem => item.flight.departureDate).ToString(), "Details", "Flights", new { item.flight.id }, new { @class = "" })
        </td>
        <td>
            @Html.ActionLink(@Html.DisplayFor(modelItem => item.passenger.FullName).ToString(), "Details", "Passengers", new { item.passenger.id }, new { @class = "" })
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.status)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.type)
        </td>
        @if(item.status != AirlineServices.Models.TicketStatusType.CANCELLED)
        { 
        <td>            
            @Html.ActionLink("Edit", "Edit", new { id = item.id }) |
            @Html.ActionLink("Details", "Details", new { id = item.id }) |
            @Html.ActionLink("Refund", "Delete", new { id = item.id }) |
            @Html.ActionLink("Pay", "Pay", new { id=item.id })
        </td>
        }
    </tr>
}

</table>
